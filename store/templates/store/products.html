{% extends 'store/base.html' %}
{% load static %}
{% block title %}{{ product.product_name }}{% endblock %}

{% block header_title %}{% if product.product_name %}{{ product.product_name }}{% else %}Vous cherché "{{ search }}"{% endif %}{% endblock %}
{% block content %}
    <style type="text/css">
        header.masthead{
            height: 150px;
            min-height: 10em;
            background-color: #000000;
            background-position: center;
            background-repeat:no-repeat;
            background-image: url("{{ product.image_url }}");
            background-size: cover;
        }
        header.masthead h1{
            font-size: 2.5rem;
        }
        h1.text-uppercase{
            {#color: white;#}
        }
        hr{
            visibility: hidden;
        }

    </style>

    {% url 'store:products' as products_url %}
    {% url 'store:substitutes' product.id as substitutes_url %}
    {% url 'store:favorits' as favorits_url %}

    <div class="products">
        <div class="container">
            <div class="row align-items-center text-center">
              <div class="col-lg-12 align-self">
                {% if request.get_full_path == products_url %}
                    {% if products_found|length_is:"0" %}
                        <h1 class="alert-danger">Nous n'avons trouvé aucun résultat pour votre recherche !</h1>
                        <h3 class="alert-info">Réessayé une nouvelle requette.</h3>
                    {% else %}
                        <h3 class="text-uppercase text-white font-weight-bold">Résultats de votre rechercher:</h3>
                    {% endif %}
                {% elif request.get_full_path == substitutes_url %}
                    {% if products_found|length_is:"0" %}
                        <h1 class="alert-danger">Nous n'avons trouvé aucun substitut pour ce produit !</h1>
                        <h3 class="alert-info">Le score nutritionnel n'est-il pas déjà correct ?</h3>
                    {% else %}
                        <h3 class="text-uppercase text-white font-weight-bold">Vous pouvez remplacer cet aliment par:</h3>
                    {% endif %}
                {% else %}
                   <h3 class="text-uppercase text-white font-weight-bold">Vos produits favorits:</h3>
                {% endif %}

              </div>
            </div>
            <div class="row justify-content-center ">
                {% for product in products_found %}
                    {% include 'store/product_thumbnails.html' %}
                    {% if forloop.counter|divisibleby:3 %}<div class="clearfix"></div>{% endif %}
                {% endfor %}
            </div>
        </div>
        {% if paginate %}
            <hr class="divider ">
          <div class="clearfix"></div>
          <nav aria-label="...">
            <ul class="pager">
              {% if products_found.has_previous %}
                  <li><a href="?page={{ products_found.previous_page_number }}">Page précédent</a></li>
              {% endif %}
              {% if products_found.has_next %}
                  <li><a href="?page={{ products_found.next_page_number }}">Page suivante</a></li>
              {% endif %}
            </ul>
          </nav>
        {% endif %}

    </div>
{% endblock %}
